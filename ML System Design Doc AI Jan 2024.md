# Дизайн интерьеров. 

## Секция 1.1 Цель разработки.  
Мы предоставляем b2b решение для магазинов мебели, позволяющее демонстрировать покупателем, желающим обустроить пустую комнату, как может выглядеть их комната, обставленная мебелью из каталога магазина. 

## Секция 1.2 Бизнес-требования и ограничения.
Проект представляет собой создание прототипа системы генерирующей с помощью AI дизайн комнаты из предметов каталога магазина. 
Требования к системе:  
1. Пользователь должен иметь возможность выбрать нужный ему тип комнаты из следующих:  спальня,  гостиная, обеденная зона.
2. Пользователь должен иметь возможность дизайн команты из следующих: современный, традиционный и арт деко.
3. Пользователь должен иметь возможность загрузить фотографию его пустой комнаты.
4. Программа должна вывести на экран результат работы алгоритма по генерации мебели на фотографии реальной комнаты.
5. Программа должна вывести на экран список цен некоторых предметов мебели.

## 1.3 Критерии успеха проекта.
Основной критерий успеха проекта это увелечение среднего чека покупателей магазина и увелечение конверсси покупателей с сайта магазина за счет использования интегрированной системы на сайте магазина. В контексте машииного обучения, предполагается, что если модель генерируют интерьер комнаты подходящим типу комнаты, а также не изменяет положение стен на фотографии, то такая картинка считается корректно сгенерированной. Метрики успеха: точность более 80%, время загрузки моделей до 10 минут, время инференса моделей до 1 минуты. 

## 1.4 Метрики качества.
1. Точность - подсчитываем отношение визуально релевантных ответов модели на запрос по отношению ко всем ответам. 
2. Время загрузки моделей.
3. Время инференса моделей. 

## 1.5 Use-case использования.  
Пользователь выбирает из предложенных типов комнат нужную ему,  а также загружает фотографию пустой комнаты. После он выбирает тип дизайна. Далее, система возвращает сгенерированную картинку мебелированной комнаты, а также список предметов мебели с указанием цены.

## 2.1. Постановка задачи машинного обучения.  
Задачами машинного обучения являются распознавание объектов на картинке, сегментации объектов и генерация нового предмета на части изображения.

## 2.2 Бейзлайн.  
Безйлайном генерации является генерация моделью Stable Diffusion на всем изображении. 
Бейзлайном детекции являются модели семейства YOLO.

## 2.3.  Выбор моделей для итогового решения.  
Модель GroundingDino была выбрана для задачи детекции.
Модель SAM (Segment Anything Model) для задачи сегментации изображения. 
Модель Stable Diffusion Inpainting для задачи генерации изоборажения в заданном регионе исходного изображения.

## 3.1 Архитектура решения.
Так, как система представляет собой прототип решения, в системе запуск моделей выполняется в google colab, туда подгружаем изображения пустой комнаты, и получаем изображение мебелированной.
Помимо этого, создан вебсайт, на котором c помощью React javascript реализованы необходимые страницы.

## 3.2 Масштабирование системы.
В текущем варианте система запускается локально и ввиду того, что модели напрямую не подсоединены к сайту, обработка каждого запроса требуют ручного вмешательства. Сайт будучи задеплоинным будет готов к нагрузке в несколько тысяч пользователей. В качестве возможности запуска моделей для обработки  загруженного на сайте файла изображения, можно запустить в google colab питон-бекенд на flask и через API отправлять сообщения на frontend. Если ноутбук google colab запускается локально, то ограничение на количество одновременных запросов зависит от ограничений системы, если он запускается в облаке с масштабируемостью, то ограничений на одновременное количество пользователей нет. Более быстродействующем решением предполагается деплой моделей по-отдельности, и обращение к ним через API запрос с фронтенда. 

## 3.3 Потенциальное расширение системы
Планируется работать не только с пустыми комнатами, но и с частично или полностью мебелированными, тогда добавляется задача распознования предметов интерьера. 

